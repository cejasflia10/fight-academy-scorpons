<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FIGHT ACADEMY SCORPIONS | Contacto</title>

  <!-- Estilos del sitio -->
  <link rel="stylesheet" href="/assets/css/styles.css">
  <!-- Estilo responsive global -->
  <link rel="stylesheet" href="/assets/css/responsive.css">

  <!-- JS existentes -->
  <script defer src="/assets/js/config.js"></script>
  <script defer src="/assets/js/menu.js"></script>
  <script defer src="/assets/js/header.js"></script>

  <style>
    /* Ajustes mínimos de esta página */
    .contact-list {margin:0; padding:0; list-style:none}
    .contact-list li {padding:8px 0; border-bottom:1px solid var(--c-border)}
    .social a {display:inline-block; margin-right:10px}
    .map-frame {width:100%; height:360px; border:0; border-radius:12px; background:#0b0d11}
    @media (min-width: 768px){ .map-frame{height:420px} }
  </style>
</head>
<body>

<!-- NAV -->
<nav class="site-nav">
  <a class="brand" href="index.html" aria-label="Inicio">
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M12 3l3 6 6 .9-4.5 4.2 1 6.9L12 18l-5.5 3 1-6.9L3 9.9 9 9z" stroke="url(#g)" stroke-width="1.5"/>
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="#22c55e"/>
          <stop offset="1" stop-color="#14b8a6"/>
        </linearGradient>
      </defs>
    </svg>
    <span>FIGHT ACADEMY SCORPIONS</span>
  </a>

  <button class="nav-toggle" aria-expanded="false" aria-controls="nav-links" aria-label="Abrir menú">☰</button>

  <div id="nav-links" class="nav-links">
    <a class="nav-link" href="disciplinas.html">Disciplinas</a>
    <a class="nav-link" href="fotos.html">Fotos</a>
    <a class="nav-link" href="ofertas.html">Ofertas</a>
    <a class="nav-link" href="promociones.html">Promociones</a>
    <a class="nav-link" href="ventas.html">Ventas</a>
    <a class="nav-link" href="equipo.html">Equipo</a>

    <div class="menu" id="menu-ingresos">
      <button class="toggle" aria-expanded="false">Ingresos ▾</button>
      <div class="submenu" hidden>
        <a href="https://multi-gimnasio-51bq.onrender.com/login.php" target="_blank" rel="noopener">App (General)</a>
        <a href="https://multi-gimnasio-51bq.onrender.com/cliente_acceso.php" target="_blank" rel="noopener">Ingreso Clientes</a>
        <a href="https://multi-gimnasio-51bq.onrender.com/login_profesor.php" target="_blank" rel="noopener">Ingreso Profesores</a>
        <a id="ing-config" href="/admin/configuraciones.php" target="_blank" rel="noopener">Configuraciones</a>
      </div>
    </div>

    <a class="btn btn-ghost" href="contacto.html">Contacto</a>
  </div>
</nav>

<main class="container">
  <h1>Contacto</h1>

  <!-- Grid responsive: datos + mapa -->
  <div class="grid gap-4 grid-sm-2">
    <!-- Columna datos -->
    <section class="card">
      <h2>Datos del gimnasio</h2>
      <ul class="contact-list">
        <li><strong>Dirección:</strong> <span id="dir">Belgrano 194, San Luis</span></li>
        <li><strong>Tel:</strong> <a id="tel" href="tel:2664611574">266 461-1574</a></li>
        <li><strong>Horario:</strong> <span id="hor">Lun a Sáb — 08:00 a 00:00</span></li>
      </ul>

      <h3 class="mt-3">Redes</h3>
      <p class="text-muted m-0">Se cargan desde Configuraciones.</p>
      <p class="social mt-2" id="social">
        <!-- Se completan por JS si existen -->
      </p>
    </section>

    <!-- Columna mapa -->
    <section class="card">
      <h2>Cómo llegar</h2>
      <iframe
        id="map-frame"
        class="map-frame"
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        allowfullscreen
        src="">
      </iframe>
      <p class="mt-2"><a id="map-link" class="nav-link" href="#" target="_blank" rel="noopener" style="padding-left:0">Abrir en Google Maps ↗</a></p>
    </section>
  </div>
</main>

<footer><small>© 2025 FIGHT ACADEMY SCORPIONS — San Luis, Argentina.</small></footer>

<script>
/* Carga de Configuraciones para: youtube, instagram, facebook y google_maps */
(function(){
  const elSocial = document.getElementById('social');
  const mapFrame = document.getElementById('map-frame');
  const mapLink  = document.getElementById('map-link');

  // Endpoints posibles (según cómo esté tu api.php)
  const ENDPOINTS = [
    `${location.origin}/api.php?sec=settings`,
    `${location.origin}/api.php?sec=site_settings`,
    `${location.origin}/api.php?sec=config`,
  ];

  async function getSettings(){
    for (const url of ENDPOINTS){
      try{
        const r = await fetch(url, {cache:'no-store'});
        if(!r.ok) continue;
        const j = await r.json();
        // Normalizamos: {items:[{..}]}, {data:{..}} o {..}
        return (j && (j.items?.[0] || j.data || j)) || null;
      }catch(_){/* sigue intentando */}
    }
    // Fallback: si config.js expone algo tipo window.__CFG
    return (window.__CFG && window.__CFG.settings) || null;
  }

  function cleanUrl(u){
    return String(u || '').trim();
  }

  function extractMapSrc(v){
    const s = String(v||'').trim();
    if (!s) return '';
    if (s.includes('<iframe')){
      const m = s.match(/src=["']([^"']+)["']/i);
      return m ? m[1] : '';
    }
    return s;
  }

  function toMapsPage(url){
    if(!url) return '#';
    // convierte /maps/embed? -> /maps?
    return url.replace('/maps/embed?', '/maps?');
  }

  getSettings().then(cfg => {
    if(!cfg) return;

    // Redes
    const links = [];
    if (cfg.youtube)   links.push(`<a class="btn-ghost" target="_blank" rel="noopener" href="${cleanUrl(cfg.youtube)}">YouTube</a>`);
    if (cfg.instagram) links.push(`<a class="btn-ghost" target="_blank" rel="noopener" href="${cleanUrl(cfg.instagram)}">Instagram</a>`);
    if (cfg.facebook)  links.push(`<a class="btn-ghost" target="_blank" rel="noopener" href="${cleanUrl(cfg.facebook)}">Facebook</a>`);
    if (links.length) elSocial.innerHTML = links.join(' ');

    // Google Maps (embed)
    const embed = extractMapSrc(cfg.google_maps || '');
    if (embed){
      mapFrame.src = embed;
      mapLink.href = toMapsPage(embed);
    }else{
      // Si no hay mapa configurado, ocultamos el iFrame y el link
      mapFrame.style.display = 'none';
      mapLink.parentElement.style.display = 'none';
    }
  });
})();
</script>
</body>
</html>
